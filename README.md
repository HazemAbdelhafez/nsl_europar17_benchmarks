# Jetson Benchmarks

## [NetSysLab](http://netsyslab.ece.ubc.ca/wiki/index.php/Networked_Systems_Laboratory)

# This repo provide three different codes.

  - CPUBenchmarks: A micro-benchmark for testing the ARM CPUs on the Nvidia Jetson TK1 and TX1 embedded baords
  - GPUBenchmarks: A micro-benchmark for testing the Nvidia GPUs on the Nvidia Jetson TK1 and TX1 embedded baords
  - Matrix Multiplication: An optimized matrix multiplication application based on the OpenBLAS and cuBLAS libraries that test the performance and shared memory on the Jetson TK1 and TX1 boards.

# Building and running CPU benchmark:

```sh
cd CPUBenchmarks
mkdir bin
make
cd bin/
./mb <benchmark_number> <num_threads> <num_iterations> <print_details>
```
### For example:
```sh
./mb 6 4 10 0 0
```
or to get more usage examples just run:
```sh
./mb
```
### Benchmarks number mapping:
* 0: Matrix Multiplication
* 1: Polynomial Evaluation
* 2: Roofline
* 3: Store simple
* 4: Store Unroll
* 5: Store Long Unroll
* 6: Floating Point Add
* 7: Floating Point Fused Multiply Add
* 8: SIMD Units
* 9: Mixed SIMD Fused Multiplu Add
 
# Building and running GPU benchmark:

```sh
cd GPUBenchmarks
mkdir bin
make
cd bin/
./stream_cuda
```
# Building and running Matrix Multiplication:

```sh
cd MatrixMultiplication
cd Release
make
./GPUMatMul <show-details> <num-iterations> <benchmark> <num-threads> <matrix-dimension> <cpu-columns>
```
### For example:
```sh
./GPUMatMul 0 1000 5 4 2048 0
```
### Benchmarks number mapping:
* 1 : matrix multiplication with explicit allocation on CPU memory
* 2 : matrix multiplication with unified memory on CPU
* 3 : matrix multiplication with CUDA HostAllocation on CPU
* 4 : matrix multiplication with direct matrix allocation on the GPU memory
* 5 : matrix multiplication with unified memory on GPU
* 6 : matrix multiplication with synch memory copy to the GPU
* 7 : matrix multiplication on both the CPU and GPU with HostMemAlloc
* 8 : matrix multiplication on both the CPU and GPU with zero-copy memory
* 9 : matrix multiplication on both the CPU and GPU with Asynch memory copy to the GPU
* 10 : matrix multiplication on both the CPU and GPU with Synch memory copy to the GPU
* 11 : matrix multiplication on both the CPU and GPU with split matrix across different memories

### Notes:
* The benchmarks and matrix multiplication were tested on Jetson Tk1 and TX1 boards.
* The make file for the matrix multiplication was autogenerated by Nvidia Ecplise edition, if you want to modify it make sure you add all the dependencies correctly.
